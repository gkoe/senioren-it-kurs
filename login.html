<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Senioren-IT Kurs</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
      padding: 2rem;
    }
    
    .login-box {
      background: white;
      padding: 3rem;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      max-width: 400px;
      width: 100%;
    }
    
    .login-box h1 {
      color: #0056b3;
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1.75rem;
      text-align: center;
    }
    
    .login-box p {
      color: #6b7280;
      text-align: center;
      margin-bottom: 2rem;
      font-size: 0.95rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #333;
      font-weight: 600;
    }
    
    .form-group input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: #007bff;
    }
    
    .btn-login {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .btn-login:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
    }
    
    .btn-login:active {
      transform: translateY(0);
    }
    
    .error-message {
      background: #fee;
      color: #c00;
      padding: 0.75rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      display: none;
      text-align: center;
    }
    
    .error-message.show {
      display: block;
    }
    
    /* Passwort anzeigen/ausblenden */
    .password-wrapper {
      position: relative;
    }
    .password-wrapper input[type="password"],
    .password-wrapper input[type="text"] {
      padding-right: 2.75rem; /* Platz f√ºr Toggle-Button */
    }
    .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      color: #374151;
      border-radius: 6px;
      padding: 0.35rem 0.5rem;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .toggle-password:hover {
      background: #e9ecef;
    }

    .demo-info {
      margin-top: 2rem;
      padding: 1rem;
      background: #f0f9ff;
      border-left: 4px solid #007bff;
      border-radius: 6px;
      font-size: 0.9rem;
      color: #0056b3;
    }
    
    @media (max-width: 480px) {
      .login-box {
        padding: 2rem 1.5rem;
      }
      
      .login-box h1 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="login-box">
      <h1>üîê Anmeldung</h1>
  <p>Bitte melde dich an, um fortzufahren</p>
      
      <div id="error-message" class="error-message">
        Benutzername oder Passwort ist falsch
      </div>
      
      <form id="login-form">
        <div class="form-group">
          <label for="username">Benutzername</label>
          <input 
            type="text" 
            id="username" 
            name="username" 
            required 
            autocomplete="username"
            placeholder="Benutzername eingeben">
        </div>
        
        <div class="form-group">
          <label for="password">Passwort</label>
          <div class="password-wrapper">
            <input 
              type="password" 
              id="password" 
              name="password" 
              required 
              autocomplete="current-password"
              placeholder="Passwort eingeben">
            <button 
              type="button" 
              id="toggle-password" 
              class="toggle-password" 
              aria-label="Kennwort anzeigen" 
              aria-pressed="false"
              title="Kennwort anzeigen">üëÅ</button>
          </div>
        </div>
        
        <button type="submit" class="btn-login">Anmelden</button>
      </form>
    </div>
  </div>
  
  <script src="assets/js/auth.js"></script>
  <script>
    // Wenn bereits eingeloggt, weiterleiten
    if (SeniorenAuth.isAuthenticated()) {
      let redirect = sessionStorage.getItem('senioren-it-redirect') || '/senioren-it-kurs/home/';
      // Falls Root als Redirect gespeichert ist, auf /home/ umleiten
      if (redirect === '/senioren-it-kurs/' || redirect === '/senioren-it-kurs') {
        redirect = '/senioren-it-kurs/home/';
      }
      sessionStorage.removeItem('senioren-it-redirect');
      window.location.href = redirect;
    }
    
    // Login Form Handler
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorMsg = document.getElementById('error-message');
      
      if (SeniorenAuth.validateLogin(username, password)) {
        SeniorenAuth.setAuthenticated();
        errorMsg.classList.remove('show');
        
        // Weiterleitung zur urspr√ºnglich angeforderten Seite oder Homepage
        let redirect = sessionStorage.getItem('senioren-it-redirect') || '/senioren-it-kurs/home/';
        if (redirect === '/senioren-it-kurs/' || redirect === '/senioren-it-kurs') {
          redirect = '/senioren-it-kurs/home/';
        }
        sessionStorage.removeItem('senioren-it-redirect');
        window.location.href = redirect;
      } else {
        errorMsg.classList.add('show');
        document.getElementById('password').value = '';
        document.getElementById('password').focus();
      }
    });

    // Passwort anzeigen/ausblenden
    const togglePwdBtn = document.getElementById('toggle-password');
    const pwdInput = document.getElementById('password');
    if (togglePwdBtn && pwdInput) {
      togglePwdBtn.addEventListener('click', () => {
        const isText = pwdInput.type === 'text';
        pwdInput.type = isText ? 'password' : 'text';
        togglePwdBtn.setAttribute('aria-pressed', String(!isText));
        togglePwdBtn.title = isText ? 'Kennwort anzeigen' : 'Kennwort verbergen';
        togglePwdBtn.setAttribute('aria-label', togglePwdBtn.title);
        togglePwdBtn.textContent = isText ? 'üëÅ' : 'üôà';
      });
    }
  </script>
</body>
</html>
